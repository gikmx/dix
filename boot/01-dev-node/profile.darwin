#! /usr/bin/env bash
! $DOTFILES && >&2 echo "DEV-NODE:404" && exit 1
! sys.is_darwin && log.error "$DOTFILES_PKG:406" && exit 1
! sys.has_brew && return 0

[ ! -s "$(brew --prefix nvm)/nvm.sh" ] && log.error "$DOTFILES_PKG:NVM:404" && return 0
source "$(brew --prefix nvm)/nvm.sh"

if [ ! -z "$(nvm ls default | grep 'N/A')" ]; then
	log.info "Installing latest version of NVM â€¦"
	target=$(nvm ls-remote | tail -1 | xargs)
	nvm install $target
	nvm alias default $target
fi
